{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\idontmind\\\\Desktop\\\\web-labs-sem7-master\\\\lab2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{getHeader,getInfo}from\"../../util/City\";import{CurrentCityHeader}from\"./CurrentCityHeader\";import{CityInfo}from\"../CityCommon/CityInfo\";// import {CityInfo}\nexport var CurrentCity=/*#__PURE__*/function(_Component){_inherits(CurrentCity,_Component);function CurrentCity(props){var _this;_classCallCheck(this,CurrentCity);_this=_possibleConstructorReturn(this,_getPrototypeOf(CurrentCity).call(this,props));_this.getWeather=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(coords){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({downloading:true});_context.next=3;return fetch(\"https://api.openweathermap.org/data/2.5/weather?lat=\".concat(coords.latitude,\"&lon=\").concat(coords.longitude,\"&appid=2e19bb27bd5e717bac388dc0c1827b17\")).then(function(response){if(!response.ok){throw Error(response.statusText);}return response;}).then(function(response){return response.json();}).then(function(response){_this.setState({cityHeader:getHeader(response),cityInfo:getInfo(response),error:false,downloading:false});}).catch(function(err){_this.setState({error:true,downloading:false});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={cityHeader:'',cityInfo:'',downloading:true,error:false};return _this;}_createClass(CurrentCity,[{key:\"render\",value:function render(){return this.state.downloading?React.createElement(\"div\",{className:\"text-center \"},React.createElement(\"div\",{className:\"title\"},\"\\u041F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435, \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u044E\\u0442\\u0441\\u044F\"),React.createElement(\"div\",{className:\"spinner-border text-secondary spin\"})):this.state.error?React.createElement(\"div\",{className:\"text-center\"},React.createElement(\"span\",{className:\"title\"},\"\\u0423\\u043F\\u0441, \\u0447\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0448\\u043B\\u043E \\u043D\\u0435 \\u0442\\u0430\\u043A\")):React.createElement(\"div\",{className:\"row\"},React.createElement(CurrentCityHeader,{data:this.state.cityHeader}),React.createElement(\"div\",{className:\"col-6\"},React.createElement(CityInfo,{data:this.state.cityInfo})));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.state===prevState){this.getWeather(this.props.position);}}}]);return CurrentCity;}(Component);","map":{"version":3,"sources":["C:/Users/idontmind/Desktop/web-labs-sem7-master/lab2/src/components/Current/CurrentCity.js"],"names":["React","Component","getHeader","getInfo","CurrentCityHeader","CityInfo","CurrentCity","props","getWeather","coords","setState","downloading","fetch","latitude","longitude","then","response","ok","Error","statusText","json","cityHeader","cityInfo","error","catch","err","state","prevProps","prevState","snapshot","position"],"mappings":"o/BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,SAAR,CAAmBC,OAAnB,KAAiC,iBAAjC,CACA,OAAQC,iBAAR,KAAgC,qBAAhC,CACA,OAAQC,QAAR,KAAuB,wBAAvB,CAEA;AAEA,UAAaC,CAAAA,WAAb,qEAEI,qBAAYC,KAAZ,CAAmB,6CACf,6EAAMA,KAAN,GADe,MAmCnBC,UAnCmB,0FAmCN,iBAAOC,MAAP,kHACT,MAAKC,QAAL,CAAc,CAACC,WAAW,CAAE,IAAd,CAAd,EADS,sBAEHC,CAAAA,KAAK,+DAAwDH,MAAM,CAACI,QAA/D,iBAA+EJ,MAAM,CAACK,SAAtF,4CAAL,CACDC,IADC,CACI,SAACC,QAAD,CAAc,CAChB,GAAI,CAACA,QAAQ,CAACC,EAAd,CAAkB,CACd,KAAMC,CAAAA,KAAK,CAACF,QAAQ,CAACG,UAAV,CAAX,CACH,CACD,MAAOH,CAAAA,QAAP,CACH,CANC,EAODD,IAPC,CAOI,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACI,IAAT,EAAd,EAPJ,EAQDL,IARC,CAQI,SAACC,QAAD,CAAc,CAChB,MAAKN,QAAL,CAAc,CACVW,UAAU,CAAEnB,SAAS,CAACc,QAAD,CADX,CAEVM,QAAQ,CAAEnB,OAAO,CAACa,QAAD,CAFP,CAGVO,KAAK,CAAE,KAHG,CAIVZ,WAAW,CAAE,KAJH,CAAd,EAMH,CAfC,EAgBDa,KAhBC,CAgBK,SAAAC,GAAG,CAAI,CACN,MAAKf,QAAL,CAAc,CACVa,KAAK,CAAE,IADG,CAEVZ,WAAW,CAAE,KAFH,CAAd,EAIH,CArBH,CAFG,uDAnCM,+DAEf,MAAKe,KAAL,CAAa,CACTL,UAAU,CAAE,EADH,CAETC,QAAQ,CAAE,EAFD,CAGTX,WAAW,CAAE,IAHJ,CAITY,KAAK,CAAE,KAJE,CAAb,CAFe,aAQlB,CAVL,+DAYa,CACL,MAAQ,MAAKG,KAAL,CAAWf,WAAZ,CACD,2BAAK,SAAS,CAAC,cAAf,EACE,2BAAK,SAAS,CAAC,OAAf,oKADF,CAEE,2BAAK,SAAS,CAAC,oCAAf,EAFF,CADC,CAMA,KAAKe,KAAL,CAAWH,KAAZ,CACI,2BAAK,SAAS,CAAC,aAAf,EACE,4BAAM,SAAS,CAAC,OAAhB,uHADF,CADJ,CAII,2BAAK,SAAS,CAAC,KAAf,EACM,oBAAC,iBAAD,EAAmB,IAAI,CAAE,KAAKG,KAAL,CAAWL,UAApC,EADN,CAEE,2BAAK,SAAS,CAAE,OAAhB,EACI,oBAAC,QAAD,EAAU,IAAI,CAAE,KAAKK,KAAL,CAAWJ,QAA3B,EADJ,CAFF,CAVV,CAgBH,CA7BL,8DA+BuBK,SA/BvB,CA+BkCC,SA/BlC,CA+B6CC,QA/B7C,CA+BuD,CAC/C,GAAI,KAAKH,KAAL,GAAeE,SAAnB,CAA8B,CAC1B,KAAKpB,UAAL,CAAgB,KAAKD,KAAL,CAAWuB,QAA3B,EACH,CACJ,CAnCL,yBAAiC7B,SAAjC","sourcesContent":["import React, {Component} from 'react';\nimport {getHeader, getInfo} from \"../../util/City\";\nimport {CurrentCityHeader} from \"./CurrentCityHeader\";\nimport {CityInfo} from \"../CityCommon/CityInfo\";\n\n// import {CityInfo}\n\nexport class CurrentCity extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            cityHeader: '',\n            cityInfo: '',\n            downloading: true,\n            error: false\n        };\n    }\n\n    render() {\n        return (this.state.downloading)\n            ? <div className=\"text-center \">\n                <div className=\"title\">Подождите, данные загружаются</div>\n                <div className=\"spinner-border text-secondary spin\">\n                </div>\n            </div>\n            : (this.state.error)\n                ? <div className=\"text-center\">\n                    <span className=\"title\">Упс, что-то пошло не так</span>\n                </div>\n                : <div className=\"row\">\n                        <CurrentCityHeader data={this.state.cityHeader}/>\n                    <div className={\"col-6\"}>\n                        <CityInfo data={this.state.cityInfo}/>\n                    </div>\n                </div>\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.state === prevState) {\n            this.getWeather(this.props.position)\n        }\n    }\n\n    getWeather = async (coords) => {\n        this.setState({downloading: true});\n        await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${coords.latitude}&lon=${coords.longitude}&appid=2e19bb27bd5e717bac388dc0c1827b17`)\n            .then((response) => {\n                if (!response.ok) {\n                    throw Error(response.statusText);\n                }\n                return response;\n            })\n            .then((response) => response.json())\n            .then((response) => {\n                this.setState({\n                    cityHeader: getHeader(response),\n                    cityInfo: getInfo(response),\n                    error: false,\n                    downloading: false\n                });\n            })\n            .catch(err => {\n                    this.setState({\n                        error: true,\n                        downloading: false\n                    });\n                }\n            );\n\n    };\n\n\n}\n"]},"metadata":{},"sourceType":"module"}